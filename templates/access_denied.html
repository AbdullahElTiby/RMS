{% extends "base.html" %}

{% block title %}Access Denied - RMS{% endblock %}

{% block extra_head %}
    <style>
        .access-denied-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            text-align: center;
            padding: 40px 20px;
        }

        .access-denied-icon {
            font-size: 80px;
            color: #ef4444;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .access-denied-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary-color, #667eea) 0%, var(--secondary-color, #764ba2) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .access-denied-message {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 40px;
            max-width: 600px;
            line-height: 1.6;
        }

        .access-denied-details {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 1px solid #fecaca;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            max-width: 500px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .access-denied-details h3 {
            color: #dc2626;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .access-denied-details p {
            color: #991b1b;
            margin: 0;
            font-size: 1rem;
        }

        .access-denied-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color, #667eea) 0%, var(--secondary-color, #764ba2) 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(108, 117, 125, 0.4);
        }

        .help-section {
            margin-top: 50px;
            padding: 30px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 15px;
            max-width: 600px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .help-section h3 {
            color: #374151;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .help-section ul {
            text-align: left;
            color: #6b7280;
            line-height: 1.6;
        }

        .help-section li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .help-section li::before {
            content: 'â€¢';
            color: var(--primary-color, #667eea);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        @media (max-width: 768px) {
            .access-denied-title {
                font-size: 2rem;
            }

            .access-denied-message {
                font-size: 1.1rem;
            }

            .access-denied-actions {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 200px;
                justify-content: center;
            }

            .help-section {
                margin-top: 30px;
                padding: 20px;
            }
        }
    </style>
{% endblock %}

{% block content %}
<div class="access-denied-container">
    <div class="access-denied-icon">
        ðŸš«
    </div>

    <h1 class="access-denied-title" data-i18n="access_denied">Access Denied</h1>

    <p class="access-denied-message" data-i18n="access_denied_message">
        You don't have the required permissions to access this resource.
    </p>

    <div class="access-denied-details">
        <h3 data-i18n="permission_required">Permission Required</h3>
        <p data-i18n="cashier_role_required">Cashier role or higher required.</p>
    </div>

    <div class="access-denied-actions">
        <a href="/dashboard" class="btn btn-primary">
            <i class="fas fa-home"></i>
            <span data-i18n="go_to_dashboard">Go to Dashboard</span>
        </a>
        <a href="/login" class="btn btn-secondary">
            <i class="fas fa-sign-in-alt"></i>
            <span data-i18n="login_different_user">Login as Different User</span>
        </a>
    </div>

    <div class="help-section">
        <h3 data-i18n="what_can_i_do">What can I do?</h3>
        <ul>
            <li data-i18n="contact_admin">Contact your administrator to request the appropriate permissions</li>
            <li data-i18n="login_different_account">Login with a different account that has the required role</li>
            <li data-i18n="check_current_role">Check your current role in your profile settings</li>
            <li data-i18n="return_to_dashboard">Return to the dashboard to access allowed features</li>
        </ul>
    </div>
</div>

<script>
    // Access Denied Page Translations
    const accessDeniedTranslations = {
        en: {
            access_denied: 'Access Denied',
            access_denied_message: 'You don\'t have the required permissions to access this resource.',
            permission_required: 'Permission Required',
            cashier_role_required: 'Cashier role or higher required.',
            go_to_dashboard: 'Go to Dashboard',
            login_different_user: 'Login as Different User',
            what_can_i_do: 'What can I do?',
            contact_admin: 'Contact your administrator to request the appropriate permissions',
            login_different_account: 'Login with a different account that has the required role',
            check_current_role: 'Check your current role in your profile settings',
            return_to_dashboard: 'Return to the dashboard to access allowed features'
        },
        ar: {
            access_denied: 'ØªÙ… Ø±ÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„',
            access_denied_message: 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯.',
            permission_required: 'Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©',
            cashier_role_required: 'Ù…Ø·Ù„ÙˆØ¨ Ø¯ÙˆØ± ÙƒØ§Ø´ÙŠØ± Ø£Ùˆ Ø£Ø¹Ù„Ù‰.',
            go_to_dashboard: 'Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
            login_different_user: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø³ØªØ®Ø¯Ù… Ù…Ø®ØªÙ„Ù',
            what_can_i_do: 'Ù…Ø§Ø°Ø§ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ù† Ø£ÙØ¹Ù„ØŸ',
            contact_admin: 'Ø§ØªØµÙ„ Ø¨Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø·Ù„Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©',
            login_different_account: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ù…Ø®ØªÙ„Ù Ù„Ù‡ Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨',
            check_current_role: 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù„ÙÙƒ Ø§Ù„Ø´Ø®ØµÙŠ',
            return_to_dashboard: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©'
        }
    };

    // Translation function
    function t(key) {
        const lang = localStorage.getItem('lang') || 'en';
        return (accessDeniedTranslations[lang] || accessDeniedTranslations.en)[key] || key;
    }

    // Apply translations
    function applyTranslations(lang) {
        const dict = accessDeniedTranslations[lang] || accessDeniedTranslations.en;
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (dict[key]) {
                el.textContent = dict[key];
            }
        });

        // Set RTL for Arabic
        if (lang === 'ar') {
            document.documentElement.setAttribute('dir', 'rtl');
            document.body.style.textAlign = 'right';
        } else {
            document.documentElement.setAttribute('dir', 'ltr');
            document.body.style.textAlign = 'left';
        }
    }

    // Initialize translations
    function initTranslations() {
        const savedLang = localStorage.getItem('lang') || 'en';
        applyTranslations(savedLang);

        // Listen for language changes
        window.addEventListener('languageChanged', function(e) {
            applyTranslations(e.detail.language);
        });
    }

    // Add some animation to the icon
    document.addEventListener('DOMContentLoaded', function() {
        const icon = document.querySelector('.access-denied-icon');
        icon.style.animation = 'shake 0.5s ease-in-out';

        // Initialize translations
        initTranslations();
    });

    // Shake animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);
</script>
{% endblock %}
